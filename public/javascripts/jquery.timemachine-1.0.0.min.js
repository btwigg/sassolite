(function($){
$.fn.timemachine=function(options){var variable={'inpHrs':-1,'inpMins':-1,'inpSecs':-1,'inpAmPm':-1,'divID':'div_t_m'};
var config=$.extend({},$.fn.timemachine.defaults,options);time_function.create(this,config,variable)};
$.fn.timemachine.defaults={left:'',top:'',format:'AMPM',showHrs:true,showMins:true,showSecs:true,min_increment:15,sec_increment:1,hr_increment:1};
time_function={timeMachId:'6d7',create:function(timemach,config,variable){this.timeMachId=variable.divID+'_'+$(timemach).attr('id');this.time_parser(timemach,variable,config);
var timeMachDiv='<br><div id="'+this.timeMachId+'" style="display:none;position:absolute;z-index:100"></div>';
$(timemach).parent().append(timeMachDiv);$("#"+this.timeMachId).css('margin-left','0px');
$("#"+this.timeMachId).css('left',this.left_pos(timemach,config));
$("#"+this.timeMachId).css('top',this.top_pos(timemach,config));$("#"+this.timeMachId).css('width',this.width(config));
$("#"+this.timeMachId).addClass("container-bkg");$("#"+this.timeMachId).append(this.header(timemach,config,variable));
$("#"+this.timeMachId+"_hdr").addClass("header-bkg");$("#"+this.timeMachId+"_hdr").children('div').addClass("header-div");
$("#"+this.timeMachId+"_hdr").find('span').addClass("header-text");$("#"+this.timeMachId+"_hdr").css('clear','both');
this.display_data.display_hrs(timemach,config,variable);this.display_data.display_mins(timemach,config,variable);
this.display_data.display_secs(timemach,config,variable);this.display_data.display_ampm(timemach,variable);
this.display_data.display_ok(timemach,config,variable);
$(timemach).bind('click',function(){$("#"+variable.divID+'_'+$(timemach).attr('id')).show('slow')})},left_pos:function(timemach,config){var lftPos=config.left;if(lftPos==''){lftPos=$(timemach).position().left}return lftPos},
top_pos:function(timemach,config){var topPos=config.top;
if(topPos=='')
{topPos=$(timemach).position().top+$(timemach).outerHeight()}return topPos},header:function(timemach,config,variable)
{var headerDivs='<div id=\"'+this.timeMachId+'_hdr\">';
if(config.showHrs==true){headerDivs=headerDivs+'<div id=\"'+this.timeMachId+'_hdr_hrs\">'+'<span >Hr</span><br></div>'}
if(config.showMins==true){headerDivs=headerDivs+'<div id=\"'+this.timeMachId+'_hdr_mins\">'+'<span >Min</span><br></div>'}
if(config.showSecs==true){headerDivs=headerDivs+'<div id=\"'+this.timeMachId+'_hdr_secs\">'+'<span >Sec</span><br></div>'}
if(config.format=='AMPM'){headerDivs=headerDivs+'<div id=\"'+this.timeMachId+'_hdr_ampm\">'+'<span >Am/Pm</span><br></div>'}
headerDivs=headerDivs+'<div id=\"'+this.timeMachId+'_ok\">'+'<span >&nbsp;</span><br></div>';
headerDivs=headerDivs+'</div>';return headerDivs}
,width:function(config){var width=0;if(config.showHrs==true){width=width+60}if(config.showMins==true){width=width+60}if(config.showSecs==true){width=width+60}if(this.time_format(config)=='AMPM'){width=width+130}if(this.time_format(config)=='24'){width=width+60}return width},time_format:function(config){return config.format},display_data:{display_hrs:function(timemach,config,variable){var hrsTable='';if(time_function.time_format(config)=='AMPM'){hrsTable=this.get_table(1,12,config.hr_increment,variable.inpHrs)}else if(time_function.time_format(config)=='24'){hrsTable=this.get_table(0,23,config.hr_increment,variable.inpHrs)}$("#"+time_function.timeMachId+"_hdr_hrs").append(hrsTable)},display_mins:function(timemach,config,variable){var minsTable=this.get_table(0,59,config.min_increment,variable.inpMins);$("#"+time_function.timeMachId+"_hdr_mins").append(minsTable)},display_secs:function(timemach,config,variable){var secsTable=this.get_table(0,59,config.sec_increment,variable.inpSecs);$("#"+time_function.timeMachId+"_hdr_secs").append(secsTable)},display_ampm:function(timemach,variable){var ampmList=new Array("AM","PM");var table='<select>';var row='';for(var i=0;i<ampmList.length;i++){row=row+'<option value = "'+ampmList[i]+'"';if(ampmList[i]==variable.inpAmPm){row=row+' selected '}row=row+'>'+ampmList[i]+'</option>'}table=table+row;table=table+'</select>';$("#"+time_function.timeMachId+"_hdr_ampm").append(table)},display_ok:function(timemach,config,variable){var okButton='<button type="button" id="'+variable.divID+'_'+$(timemach).attr('id')+'_ok_but">Ok</button>';$("#"+variable.divID+'_'+$(timemach).attr('id')+"_ok").append(okButton);$("#"+variable.divID+'_'+$(timemach).attr('id')+"_ok_but").bind('click',function(){time_function.update_time(timemach,variable,config)})},get_table:function(start,stop,increment,selOpt){var table='<select>';var rows=this.get_rows(start,stop,increment,selOpt);table=table+rows;table=table+'</select>';return table},get_rows:function(start,stop,increment,selOpt){var row='';for(var i=start;i<=stop;i=i+increment){var rowVal=i;if(rowVal<10){rowVal='0'+rowVal}row=row+'<option value="'+rowVal+'"';if(rowVal==selOpt){row=row+' selected '}row=row+'>'+rowVal+'</option>'}return row}},update_time:function(timemach,variable,config){var selTime='';if(config.showHrs==true){selTime=selTime+$("#"+variable.divID+'_'+$(timemach).attr('id')+"_hdr_hrs option:selected").val()}if(config.showMins==true){if(config.showHrs==true){selTime=selTime+':'}selTime=selTime+$("#"+variable.divID+'_'+$(timemach).attr('id')+"_hdr_mins option:selected").val()}if(config.showSecs==true){if(config.showHrs==true||config.showMins==true){selTime=selTime+':'}selTime=selTime+$("#"+variable.divID+'_'+$(timemach).attr('id')+"_hdr_secs option:selected").val()}if(this.time_format(config)=='AMPM'){selTime=selTime+' '+$("#"+variable.divID+'_'+$(timemach).attr('id')+"_hdr_ampm option:selected").val()}$(timemach).val(selTime);$("#"+variable.divID+'_'+$(timemach).attr('id')).hide('slow');return false},time_parser:function(timemach,variable,config){if($(timemach).val()!=undefined&&$(timemach)!=null&&$(timemach).val()!=''){var inputVal=$(timemach).val();var charList='';var isHrSet=false;var isMinSet=false;
var isSecset=false;var isAmPmSet=false;if(config.showHrs==false){isHrSet=true}if(config.showMins==false){isMinSet=true}if(config.showSecs==false){isSecset=true}if(config.format=='24'){isAmPmSet=true}var isNumParseComplete=false;
for(var i=0;i<(inputVal.length);i++){var singleChar=inputVal.substring(i,i+1);if(singleChar=='A'||singleChar=='P'){if(!isAmPmSet){variable.inpAmPm=singleChar+'M';isAmPmSet=true;
return false}}if(isNumeric(singleChar)==true&&singleChar!=' '){charList=charList+singleChar;if(i!=(inputVal.length-1)){continue}isNumParseComplete=true}else{isNumParseComplete=true}if(isNumParseComplete==true){isNumParseComplete=false;
if(charList<10&&charList.length==1){charList='0'+charList}if(!isHrSet){variable.inpHrs=charList;
isHrSet=true;charList='';continue}if(!isMinSet){variable.inpMins=charList;isMinSet=true;charList='';continue}
if(!isSecset){variable.inpSecs=charList;isSecset=true;charList='';continue;}}}}return false;}}
function isNumeric(num){return!isNaN(num);}})(jQuery);